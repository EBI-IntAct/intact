#summary Explains what happens in the database when triggering an export.

= IMEx Export =

This page explains how to prepare an IMEx export using the !IntAct API and model.

An IMEx export consists in three phases:

  * *Annotation*: this phase spans for the time between two exports. Modified data (e.g. interactions, publications) during normal curation is annotated so the preparation phase can detect what has been modified after the previous release.
  * *Preparation*: in this phase the tables that contain information about the exported data are populated by fetching all the IMEx-relevant data that has been modified during a specific period of time.
  * *Export*: this is not controlled by the !IntAct API, but by an [http://code.google.com/p/imex-repository/ IMEx repository] extension.

Two database tables are important for this task:

|| *Table*              || *Entity* || *Description*                         ||
|| imex_exp_release     || uk.ac.ebi.intact.model.meta.!ImexExportRelease     || Contains a row per exported release ||
|| imex_exp_interaction || uk.ac.ebi.intact.model.meta.!ImexExportInteraction || Rows represent an IMEx action (CREATED, UPDATE, DELETED) for an interaction and refer to an specific exported release. No two rows containing the same interaction will be present for a specific release ||

== Annotation ==

An annotation, _last-relevant-imex-update_ is added to Interactions and Publications when a modification that is relevant for IMEx is done. 

*TODO*: explain API to do this when it is implemented.

When an interaction is deleted, a record is directly added to the _imex_exp_release_ table if the interaction had an IMEx ID.

*TODO*: API

== Preparation ==



== Export ==

This part involves exporting the data to an IMEx FTP site. This task is handled by an extension for the IMEx repository that is an !IntAct provider. The provider will read the IMEx export tables and fetch the data that needs to be releasing. The IMEx repository will handle the PSI-MI XML conversion and the publication in the FTP site.