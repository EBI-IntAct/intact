<?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.0//EN"
          "http://jakarta.apache.org/struts/dtds/struts-config_1_0.dtd">

<!--
     This is the Struts configuration file for the example application,
     using the proposed new syntax.

     NOTE:  You would only flesh out the details in the "form-bean"
     declarations if you had a generator tool that used them to create
     the corresponding Java classes for you.  Otherwise, you would
     need only the "form-bean" element itself, with the corresponding
     "name" and "type" attributes.
-->


<struts-config>

    <!-- ========== Form Bean Definitions =================================== -->
    <form-beans>

        <!-- logon form bean -->
        <form-bean name="loginForm"
                   type="uk.ac.ebi.intact.struts.security.LoginForm"/>

        <!-- cv search form bean -->
        <form-bean name="searchForm"
                   type="uk.ac.ebi.intact.struts.view.SearchForm"/>

        <!-- Form bean for editing CV  -->
        <form-bean name="cvEditForm"
                   type="uk.ac.ebi.intact.struts.view.CvEditForm"/>

        <!-- Form bean for adding a comment (annotation) -->
        <form-bean name="commentAddForm"
                   type="uk.ac.ebi.intact.struts.view.CommentAddForm"/>

        <!-- Form bean for adding a xref (cross reference) -->
        <form-bean name="xrefAddForm"
                   type="uk.ac.ebi.intact.struts.view.XrefAddForm"/>

    </form-beans>

    <!-- ========== Global Forward Definitions ============================== -->
    <global-forwards>
        <forward name="logoff"   path="/logoff.do"/>
        <forward name="login"    path="/login.jsp"/>
        <forward name="success"  path="/edit.jsp"/>
        <forward name="failure"  path="/error.jsp"/>
    </global-forwards>

    <!-- ========== Action Mapping Definitions ============================== -->
    <action-mappings>

        <!-- Process a user logoff -->
        <action path="/logoff"
                type="uk.ac.ebi.intact.struts.LogoffAction">
            <forward name="success" path="/index.jsp"/>
        </action>

        <!-- Process a user logon. error.jsp is set to input as basic error checking
             is performed at LogonForm class. To display validation errors from
             validate method in the form, provide loginError for 'input'.
        -->
        <action path="/login"
                type="uk.ac.ebi.intact.struts.security.LoginAction"
                name="loginForm"
                scope="request"
                input="/loginError.jsp">
            <forward name="failure" path="/loginError.jsp"/>
            <forward name="success" path="/search.jsp"/>
        </action>

        <!-- Process a user searches for a CV Object. -->
        <action path="/search"
                name="searchForm"
                type="uk.ac.ebi.intact.struts.controller.SearchAction"
                scope="request"
                input="/error.jsp">
            <forward name="noMatch" path="/noMatch.jsp"/>
            <forward name="success" path="/results.jsp"/>
        </action>

        <!-- Process a user selects CvObject from a search result. -->
        <action path="/results"
                type="uk.ac.ebi.intact.struts.controller.ResultsAction"
                scope="request"
                name="searchForm">
        </action>

        <!-- Process a user selects Submit, Cancel or Delete buttons
             from edit.jsp.
         -->
        <action path="/editCv"
                type="uk.ac.ebi.intact.struts.controller.CvEditAction"
                name="cvEditForm"
                scope="request"
                input="/edit.jsp">
           <forward name="success" path="/search.jsp"/>
        </action>

        <!-- When the user adds a new comment. -->
        <action path="/addComment"
                type="uk.ac.ebi.intact.struts.controller.CommentAddAction"
                name="commentAddForm"
                scope="request"
                input="/edit.jsp">
        </action>

        <!-- When the user deletes an existing comment. -->
        <action path="/delComment"
                type="uk.ac.ebi.intact.struts.controller.CommentDelAction"
                scope="request"
                input="/edit.jsp">
        </action>

        <!-- When the user adds a new xref. -->
        <action path="/addXref"
                type="uk.ac.ebi.intact.struts.controller.XrefAddAction"
                name="xrefAddForm"
                scope="request"
                input="/edit.jsp">
        </action>

        <!-- When the user deletes an existing xref. -->
        <action path="/delXref"
                type="uk.ac.ebi.intact.struts.controller.XrefDelAction"
                scope="request"
                input="/edit.jsp">
        </action>

    <!-- The standard administrative actions available with Struts -->
    <!-- These would be either omitted or protected by security -->
    <!-- in a real application deployment
    <action    path="/admin/addFormBean"
               type="org.apache.struts.actions.AddFormBeanAction"/>
    <action    path="/admin/addForward"
               type="org.apache.struts.actions.AddForwardAction"/>
    <action    path="/admin/addMapping"
               type="org.apache.struts.actions.AddMappingAction"/>
    <action    path="/admin/reload"
               type="org.apache.struts.actions.ReloadAction"/>
    <action    path="/admin/removeFormBean"
               type="org.apache.struts.actions.RemoveFormBeanAction"/>
    <action    path="/admin/removeForward"
               type="org.apache.struts.actions.RemoveForwardAction"/>
    <action    path="/admin/removeMapping"
               type="org.apache.struts.actions.RemoveMappingAction"/>

               -->
    </action-mappings>
</struts-config>
