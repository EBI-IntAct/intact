<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.prime.com.tr/ui"


                xmlns:composite="http://java.sun.com/jsf/composite">

<!--           xmlns:iv="http://java.sun.com/jsf/composite/components/intactview"
                xmlns:iamf="http://intact.ebi.ac.uk/mitabfunctions"
                xmlns:iav="http://intact.ebi.ac.uk/view"
                xmlns:iax="http://intact.ebi.ac.uk/extlinks"
-->

    <!-- INTERFACE -->
  <composite:interface>
      <composite:attribute name="url" type="java.lang.String" required="true"/>
  </composite:interface>

  <!-- IMPLEMENTATION -->
    <composite:implementation>

        <h:outputScript library= "javascript/InteractionRepresentation/resources" name="annotOverlaping.js" target="head"/>

     <!-- Not needed because jQuery is already included by richfaces
     <h:outputScript library="javascript/InteractionRepresentation/resources" name="jquery-1.4.3.min.js" target="head"/> -->

      <!--  <h:outputScript library= "javascript/InteractionRepresentation/resources" name="jquery-ui-1.8.10.custom.css" target="head"/>
        <h:outputScript library= "javascript/InteractionRepresentation/resources" name="jquery-ui-1.8.10.custom.min.js" target="head"/> -->
        <h:outputScript library= "javascript/InteractionRepresentation/resources" name="raphael-min.js" target="head"/>
        <h:outputScript library= "javascript/InteractionRepresentation/InteractionRepresentation" name="ui.Interaction.js"/>
        <h:outputScript library= "javascript/InteractionRepresentation/InteractionRepresentation/resources/js" name="featureDrawer.js"/>
        <h:outputScript library= "javascript/InteractionRepresentation/InteractionRepresentation/resources/js" name="participantDrawer.js"/>
        <h:outputScript library= "javascript/InteractionRepresentation/InteractionRepresentation/resources/js" name="rangeStatusFunctionCollection.js"/>
        <h:outputScript library= "javascript/InteractionRepresentation/InteractionRepresentation/resources/js" name="shapeDrawer.js"/>
        <h:outputScript library= "javascript/InteractionRepresentation/InteractionRepresentation/resources/js" name="utils.js" target="head"/>

        <table width="95%" id="featureTable">
           <tr>
               <td style="width:100%;vertical-align:top;text-align:center;" id="featureColumn"/>
           </tr>
       </table>

        <script type="text/javascript">

           var width = document.getElementById("featureColumn").clientWidth;

           jQuery(function(){
               var elementPosition = $('#featureColumn').offset();
               width -= elementPosition.left;

               var intRes = $('#featureColumn').Interaction({
                   width: width,
                   developingMode: true,
                   jsonUrl : '#{cc.attrs.url}' + '&amp;format=json',
                   proxyUrl: '/editor/proxy',
                   useProxyForData: false,
                   legendPosition: 'right',
                   loadingImageUrl: '/editor/resources/images/wait_black_indicator.gif'
               });
           });

        </script>

    </composite:implementation>

</ui:composition>
