y e<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:jsp="http://java.sun.com/JSP/Page"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:ebi="http://ebi.ac.uk/faces/components">

  <body>

  <f:view>
      <ui:composition>

          <h:panelGroup rendered="#{not empty newsBean.news}">

              <ebi:news id="news1" value="#{newsBean.lastNews}"
                        newsFeedUrl="feed"
                        archiveAction="news_archive"/>


              <div class="iconboxheading">
                  <a href="#" onclick="intact_toggleVisibility('newsPanel')">News</a>
                  <h:outputText value="  "/>
                  <h:outputLink value="feed">
                      <h:graphicImage alt="RSS" url="http://www.ebi.ac.uk/intact/site/images/xml_rss2.gif" style="border:0"/>
                  </h:outputLink>
              </div>
              <div id="newsPanel" class="iconboxcontents">

                  <c:forEach var="pieceOfNews" items="#{newsBean.lastNews}">
                  <!--<ui:repeat var="pieceOfNews" value="#{newsBean.lastNews}">-->

                      <strong>
                          <h:outputText value="#{is:convertToDate(pieceOfNews.date,'yyyyMMdd')}">
                              <f:convertDateTime/>
                          </h:outputText>

                          <br/>

                          #{pieceOfNews.title}</strong>

                      <p>

                          <h:outputText value="#{pieceOfNews.description.value}" escape="#{pieceOfNews.description.escape}"/>

                          <c:if test="#{pieceOfNews.moreLink != null}">
                              &nbsp;
                              <h:outputLink value="#{pieceOfNews.moreLink}">
                                  <h:outputText value="[more]"/>
                              </h:outputLink>
                          </c:if>

                      </p>
                      <br/>

                  <!--</ui:repeat>-->
                  </c:forEach>

                  <h:outputText value="More news in the "/>
                  <h:commandLink value="Archive" action="news_archive"/>

              </div>

          </h:panelGroup>

      </ui:composition>
  </f:view>

  </body>
</html>