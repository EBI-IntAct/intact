/*
 * Copyright 2001-2007 The European Bioinformatics Institute.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package ${packageName};

import java.util.*;
import uk.ac.ebi.intact.psixml.tools.validator.*;

#foreach( $importedClass in ${mcm.importedClasses} )
import ${importedClass.name};
#end

/**
 * This class is autogenerated. DO NOT MODIFY!
 * ${artifactId}, v.${version}
 */
public class ${type} implements Validator<${modelClass.simpleName}> {

    public ${type}()
    {
        // empty constructor
    }

    public ValidationReport validate(${modelClass.simpleName} model)
    {
        ValidationReportImpl report = new ValidationReportImpl();

        // boolean checks

        #foreach( $fieldMetadata in ${mcm.booleansWithMetadata} )
        #set ( $clause = "model.${fieldMetadata.getterMethodName}()" )
        #if ( ${fieldMetadata.failIfTrue} )
        if ($clause) {
           System.out.println("SHOULD INVALIDATE REPORT AND ADD A MESSAGE");
        }
        #end
        #if ( ${fieldMetadata.failIfFalse} )
        if (!${clause}) {
           System.out.println("SHOULD INVALIDATE REPORT AND ADD A MESSAGE");
        }
        #end
        #end

        // other psi xml element checks

        #foreach( $fieldMetadata in ${mcm.individuals} )
        #set ( $validatorVarName = "validator$velocityCount" )
        #set ( $reportVarName = "report$velocityCount" )

        ${fieldMetadata.validatorClassName} ${validatorVarName} = new ${fieldMetadata.validatorClassName}();
        ValidationReport ${reportVarName} = ${validatorVarName}.validate(model.${fieldMetadata.getterMethodName}());
        report.mergeWith($reportVarName);
        
        #end

        // collection checks

        #foreach( $fieldMetadata in ${mcm.collections} )
        #set ( $colVarName = "col$velocityCount" )

        Collection<${fieldMetadata.type.simpleName}> $colVarName = model.${fieldMetadata.getterMethodName}();

        #if ( ${fieldMetadata.min} > 0 )
        if (${colVarName}.size() < ${fieldMetadata.min}) {
            System.out.println("SHOULD INVALIDATE REPORT AND ADD A MESSAGE");
        }
        #end

        #if ( ${fieldMetadata.max} > 0 && ${fieldMetadata.max} != 2147483647 )
        if (${colVarName}.size() > ${fieldMetadata.max}) {
            System.out.println("SHOULD INVALIDATE REPORT AND ADD A MESSAGE");
        }
        #end

        for (${fieldMetadata.type.simpleName} elem : $colVarName) {
            ${fieldMetadata.validatorClassName} validator = new ${fieldMetadata.validatorClassName}();
            ValidationReport subReport = validator.validate(elem);
            report.mergeWith(subReport);
        }
        #end

        return report;
    }
}