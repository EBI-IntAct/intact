<?xml version="1.0"?>

<!DOCTYPE faces-config PUBLIC
  "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN"
  "http://java.sun.com/dtd/web-facesconfig_1_1.dtd" >

<faces-config>

    <application>
        <!-- tell JSF to use Facelets -->
        <view-handler>com.sun.facelets.FaceletViewHandler</view-handler>
    </application>

    <converter>
        <converter-for-class>uk.ac.ebi.intact.persistence.dao.query.impl.SearchableQuery</converter-for-class>
        <converter-class>uk.ac.ebi.intact.app.search.convert.SearchableQueryConverter</converter-class>
    </converter>

    <managed-bean>
        <managed-bean-name>searchBean</managed-bean-name>
        <managed-bean-class>uk.ac.ebi.intact.app.search.mb.SearchBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
        <managed-property>
            <property-name>searchCache</property-name>
            <value>#{searchCacheBean}</value>
        </managed-property>
        <managed-property>
            <property-name>userHistory</property-name>
            <value>#{userHistoryBean}</value>
        </managed-property>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>searchCacheBean</managed-bean-name>
        <managed-bean-class>uk.ac.ebi.intact.app.search.mb.SearchCacheBean</managed-bean-class>
        <managed-bean-scope>application</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>userHistoryBean</managed-bean-name>
        <managed-bean-class>uk.ac.ebi.intact.app.search.mb.UserHistoryBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>experimentResultsBean</managed-bean-name>
        <managed-bean-class>uk.ac.ebi.intact.app.search.mb.results.ExperimentResultsBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>

    <navigation-rule>
        <navigation-case>
            <from-outcome>home</from-outcome>
            <to-view-id>/index.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>advSearch</from-outcome>
            <to-view-id>/contents/adv_search.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>results</from-outcome>
            <to-view-id>/contents/search_results.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/contents/search_results.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>experiments</from-outcome>
            <to-view-id>/contents/results_experiment.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
</faces-config>