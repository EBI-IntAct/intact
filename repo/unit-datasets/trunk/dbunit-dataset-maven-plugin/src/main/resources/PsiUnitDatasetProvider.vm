/** AUTO-GENERATED **/
package $mojo.generatedPackage;

import java.net.URL;
import java.util.Map;
import java.util.HashMap;
import java.io.IOException;

public final class $classSimpleName implements $providerInterfaceName {

#foreach( $dataset in $mojo.datasets )
    public static final String ${dataset} = "${dataset}";
#end

    Map<String,$datasetInterfaceName> datasets;

    public $classSimpleName() {
        datasets = new HashMap<String,$datasetInterfaceName>();

        #foreach( $dataset in $mojo.datasets )
        datasets.put("$dataset",createTestDataset("${dataset}", ${dataset.containsAllCVs}));
        #end
    }

    public $datasetInterfaceName getTestDataset(String id) {
        if (!datasets.containsKey(id)) {
            throw new IllegalArgumentException("No Test Dataset found with this id: "+id);
        }
        return datasets.get(id);
    }

    private $datasetInterfaceName createTestDataset(String id, boolean containsAllCVs) {
        URL url = ${classSimpleName}.class.getResource(id+".xml");
        String formatType = "xml";

        $datasetInterfaceName testDataset = null;

         try {
            testDataset = ${datasetFactoryName}.createDbUnitTestDataset(id, url, containsAllCVs, formatType);
         } catch (IOException e) {
            throw new RuntimeException(e);
         }

         return testDataset;
    }

}